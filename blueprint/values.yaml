# @schema
# description: ArgoCD parameters section
# type: object
# @schema
argocd:
  # @schema
  # description: Namespace where ArgoCD has been installed
  # type: string
  # default: krateo-system
  # @schema
  namespace: krateo-system
  # @schema
  # description: ArgoCD application configuration section
  # type: object
  # @schema
  application:
    # @schema
    # description: ArgoCD Application project
    # type: string
    # default: default
    # @schema
    project: default
    # @schema
    # description: ArgoCD Application source parameters section
    # type: object
    # @schema
    source:
      # @schema
      # type: string
      # description: ArgoCD Application source path inside the repository created by the template
      # default: chart/
      # @schema
      path: chart/
    # @schema
    # description: ArgoCD Application destination parameters section
    # type: object
    # @schema
    destination:
      # @schema
      # description: ArgoCD Application target cluster
      # type: string
      # format: idn-hostname
      # default: https://kubernetes.default.svc 
      # @schema
      server: https://kubernetes.default.svc
      # @schema
      # description: ArgoCD Application target namespace
      # type: string
      # default: fireworks-app
      # @schema
      namespace: fireworks-app
    # @schema
    # description: ArgoCD Application synchronization enabled
    # type: boolean
    # default: false
    # @schema
    syncEnabled: false
    # @schema
    # description: ArgoCD Application synchronization policies section
    # type: object
    # @schema
    syncPolicy:
      # @schema
      # description: ArgoCD Application automated synchronization policies section
      # type: object
      # @schema
      automated:
        # @schema
        # type: boolean
        # default: true
        # @schema
        prune: true
        # @schema
        # type: boolean
        # default: true
        # @schema
        selfHeal: true

# @schema
# description: Helm Chart parameters section
# type: object
# @schema
app:
  # @schema
  # description: Helm Chart replicas parameter
  # type: integer
  # default: 1
  # @schema
  replicas: 1
  # @schema
  # description:  Helm Chart service parameters section
  # type: object
  # @schema
  service:
    # @schema
    # description: Helm Chart service type
    # type: string
    # enum:
    # - NodePort
    # - LoadBalancer
    # default: NodePort
    # @schema
    type: NodePort
    # @schema
    # description: Helm Chart service port
    # type: integer
    # minimum: 1
    # maximum: 65535
    # default: 31180
    # @schema
    port: 31180

# @schema
# description: Git Repository parameters section
# type: array
# items:
#   type: object
#   properties:
#     unsupportedCapabilities:
#       type: boolean
#       default: true
#       description: UnsupportedCapabilities enable Go-Git transport.UnsupportedCapabilities Azure DevOps requires capabilities multi_ack / multi_ack_detailed, which are not fully implemented in go-git library and by default are included in transport.UnsupportedCapabilities.
#     insecure:
#       type: boolean
#       default: true
#       description: Insecure is useful with hand made SSL certs
#     fromRepo:
#       type: object
#       description: Parameters section for Git repository used as template for the application skeleton
#       properties:
#         scmUrl:
#           type: string
#           format: idn-hostname
#           default: https://github.com
#           examples: [https://api.example.org]
#           description: Url of the source Git repository
#         org:
#           type: string
#           description: Organization/group/subgroup of the source Git repository
#           default: krateoplatformops-blueprints
#         name: 
#           type: string
#           description:  Name for the source Git repository
#           default: github-scaffolding
#         branch:
#           type: string
#           description: Branch of Git repository used as template for the application skeleton
#           default: main
#         path:
#           type: string
#           default: skeleton/
#           description: Path of Git repository used as template for the application skeleton
#         credentials:
#           type: object
#           description: References to the secrets that contain the credentials required to clone the repository (in case of private ones)
#           properties:
#             authMethod:
#               type: string
#               enum:
#               - generic
#               - bearer
#               default: generic
#               description: AuthMethod defines the authentication mode.
#             secretRef:
#               type: object
#               description: Reference details about the secret where the credentials are stored
#               properties:
#                 namespace:
#                   type: string
#                   description: Namespace of the secret where the credentials are stored
#                   default: krateo-system
#                 name:
#                   type: string
#                   description: Name of the secret where the credentials are stored
#                   default: github-repo-creds
#                 key:
#                   type: string
#                   description: Key of the secret to use
#                   default: token
#     toRepo:
#       type: object
#       description: Parameters section for Git repository that will be created by Krateo
#       properties:
#         scmUrl:
#           type: string
#           format: idn-hostname
#           default: https://github.com
#           examples: [https://api.example.org]
#           description: Url of the source Git repository
#         org:
#           type: string
#           description: Organization/group/subgroup for the target Git repository
#           default: krateoplatformops-blueprints
#         name: 
#           type: string
#           description: Name for the target Git repository
#           required: true
#         branch:
#           type: string
#           description: Branch for the target Git repository
#           default: main
#         path:
#           type: string
#           default: /
#           description: Path of the target Git repository
#         credentials:
#           type: object
#           description: References to the secrets that contain the credentials required to commit to the target repository (in case of private ones)
#           properties:
#             authMethod:
#               type: string
#               enum:
#               - generic
#               - bearer
#               default: generic
#               description: AuthMethod defines the authentication mode.
#             secretRef:
#               type: object
#               description: Reference details about the secret where the credentials are stored
#               properties:
#                 namespace:
#                   type: string
#                   description: Namespace of the secret where the credentials are stored
#                   default: krateo-system
#                 name:
#                   type: string
#                   description: Name of the secret where the credentials are stored
#                   default: github-repo-creds
#                 key:
#                   type: string
#                   description: Key of the secret to use
#                   default: token
#     private:
#       description: Whether the repository is private
#       type: boolean
#       default: false
#     initialize:
#       description: Whether the repository must be initialized
#       type: boolean
#       default: true
#     deletionPolicy:
#       type: string
#       description: DeletionPolicy specifies what will happen to the underlying external when this managed resource is deleted.
#       enum:
#       - Delete
#       - Orphan
#       default: Delete
#     verbose:
#       description: Whether to enable verbose logging for Repo controller 
#       type: boolean
#       default: false
#     configurationRef:
#       type: object
#       description: Configuration reference for the Repo resource
#       properties:
#         name:
#           type: string
#           description: Name of the RepoConfiguration resource
#           default: repo-config
#         namespace: 
#           type: string
#           description: Namespace of the RepoConfiguration resource
#           default: demo-system
# @schema
git:
- unsupportedCapabilities: true
  insecure: true
  fromRepo:
    scmUrl: https://github.com
    org: krateoplatformops-blueprints
    name: github-scaffolding
    branch: main
    path: skeleton-frontend/
    credentials:
      authMethod: generic
      secretRef:
        namespace: krateo-system
        name: github-repo-creds
        key: token
  toRepo:
    scmUrl: https://github.com
    org: krateoplatformops-test
    name: ""
    branch: main
    path: /
    credentials:
      authMethod: generic
      secretRef:
        namespace: krateo-system
        name: github-repo-creds
        key: token
    private: false
    initialize: true
    deletionPolicy: Delete
    verbose: false
    configurationRef:
      name: repo-config
      namespace: demo-system
